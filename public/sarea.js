var sarea=function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addClass=function(t,e){e=" "+e;var i=null;i="string"==typeof t?document.getElementById(t):t;-1==i.className.indexOf(e)&&(i.className+=e)},e.removeClass=function(t,e){e=" "+e;var i=null;i="string"==typeof t?document.getElementById(t):t;i.className=i.className.replace(e,"")},e.getFirstKey=function(t){for(var e in t)return e;return""}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.close=e.open=e.init=e.addSelEventListener=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),a=i(2),l=i(3),s=i(4);var r=null,o=null,u="cont-sarea",c="cont-sarea-show",h=null,f=null,v=null,d=null,y=(e.addSelEventListener=function(t,e){f=function(i){v=h.getAllSelVal();var n=h.getTag();null==e?t(v,n):t.call(e,v,n),y()}},e.init=function(t,e,i){if(h&&h.getData()==t&&d==e)console.warn("请勿重复初始化sarea");else{d=e,v=[],o=null,(h=t instanceof Array?new l.SelDataMgr:new a.SelAssDataMgr).setData(t,e,i);var n=document.getElementById(u);n&&n.remove();var s="";s+='\n\t<div class="sarea">\n\t\t<div class="sarea-hd">\n\t\t\t<span id="btn-area-cancel" class="btn-area">取消</span>\n\t\t\t<span id="btn-area-ok" class="btn-area">确认</span>\n\t\t</div>\n\n\t\t<div class="sarea-bd">\n\t\t\t<div id="selmask" class="selmask"></div>\n\t\t</div>\n\t</div>\n\t';var c,m,p=document.createElement("div");p.className=p.id=u,p.innerHTML=s,document.body.appendChild(p),c=p,m=document.documentElement.clientWidth||document.body.clientWidth,c.style.fontSize=m/7.5+"px",r=p,document.querySelector("#btn-area-cancel").onclick=y,document.querySelector("#btn-area-ok").onclick=f}},e.open=function(t){if(null!=r){if(h.initSelAry(t||v),n.addClass(r,c),null==o){var e=r.querySelector(".sarea-bd");o=new s.SelScroll(e,h)}o.updateList()}else console.error("sarea 还没初始化")},e.close=function(){null!=r&&n.removeClass(r,c)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelAssDataMgr=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0));e.SelAssDataMgr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listData,this.blockNum,this.selValAry,this.tag}return n(t,[{key:"getIsAss",value:function(){return!0}},{key:"setData",value:function(t,e,i){this.listData=t,this.tag=i||"";for(var n=1,l=t;;){var s=a.getFirstKey(l);if(!l[s].items)break;n++,l=l[s].items}this.blockNum=e||n}},{key:"getData",value:function(){return this.listData}},{key:"getTag",value:function(){return this.tag}},{key:"getBlockNum",value:function(){return this.blockNum}},{key:"initSelAry",value:function(t){t=t||[];for(var e=this.listData,i=0;i<this.blockNum;i++)null==e||"{}"==JSON.stringify(e)?t[i]="":(t[i]&&null!=e[t[i]]||(t[i]=a.getFirstKey(e)),e=e[t[i]].items);this.selValAry=t}},{key:"setSel",value:function(t,e){this.selValAry[t]!=e&&(this.selValAry[t]=e,this.initSelAry(this.selValAry))}},{key:"getAllSelVal",value:function(){return this.selValAry}},{key:"getSelValById",value:function(t){return this.selValAry[t]}},{key:"getListDataById",value:function(t){for(var e=this.listData,i=0;i<t;i++){if(!this.selValAry[i])return{};e=e[this.selValAry[i]].items}return e}},{key:"getTagByKey",value:function(t,e){var i=0;for(var n in t){if(e==n)break;i++}return i}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.SelDataMgr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listData,this.blockNum,this.selValAry,this.tag}return n(t,[{key:"getIsAss",value:function(){return!1}},{key:"setData",value:function(t,e,i){this.listData=t,this.blockNum=e||this.listData.length,this.tag=i||""}},{key:"getData",value:function(){return this.listData}},{key:"getTag",value:function(){return this.tag}},{key:"getBlockNum",value:function(){return this.blockNum}},{key:"initSelAry",value:function(t){t=t||[];for(var e=0;e<this.blockNum;e++)if(!t[e]||null==this.listData[e][t[e]])for(var i in this.listData[e]){t[e]=i;break}this.selValAry=t}},{key:"setSel",value:function(t,e){this.selValAry[t]=e}},{key:"getAllSelVal",value:function(){return this.selValAry}},{key:"getSelValById",value:function(t){return this.selValAry[t]}},{key:"getListDataById",value:function(t){return this.listData[t]}},{key:"getTagByKey",value:function(t,e){var i=0;for(var n in t){if(e==n)break;i++}return i}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelScroll=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0));var l=function(t){var e=document.createElement("div");return e.id=t,e.className="block "+t,e.innerHTML='<ul class="sarea-list"></ul>',e};e.SelScroll=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bId=n||0,this.listData=null,this.slDataMgr=i,this.isAss=i.getIsAss();var a=l("block-"+this.bId);e.appendChild(a);var s=this.slDataMgr.getBlockNum()-this.bId-1;this.subSelScroll=s>0?new t(e,this.slDataMgr,this.bId+1):null,this.el_cont=a,this.el_list=this.el_cont.querySelector(".sarea-list"),this.el_items=null,this.itemHei=null,this.slowAniTimer=null,this.inSlowAni=!1,this.inTouch=!1,this.maxTop=0,this.startTimeStamp=0,this.startClientY=0,this.curMoveClientY=0,this.el_cont.addEventListener("touchstart",this.onTouchStart.bind(this),!0),this.el_cont.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.el_cont.addEventListener("touchend",this.onTouchEnd.bind(this),!0)}return n(t,[{key:"onTouchStart",value:function(t){if(t.preventDefault(),!this.inSlowAni){this.inTouch=!0;var e=t.changedTouches[0];this.startTimeStamp=t.timeStamp,this.startClientY=e.clientY,this.curMoveClientY=e.clientY}}},{key:"onTouchMove",value:function(t){t.preventDefault(),this.inTouch&&this.drag(t,!1)}},{key:"onTouchEnd",value:function(t){if(t.preventDefault(),this.inTouch){this.inTouch=!1;var e=t.changedTouches[0],i=Math.abs(t.timeStamp-this.startTimeStamp),n=Math.abs(e.clientY-this.startClientY);if(i<250&&n<this.itemHei)this.drag(t,!0);else if(i<300&&n>=2*this.itemHei){var a;a=e.clientY>this.startClientY?-1:1;var l=1-i/300,s=n/(10*this.itemHei),r=Math.ceil(s*l*100);this.slide(t,a,r)}else this.drag(t,!0)}else this.inTouch=!1}},{key:"drag",value:function(t,e){var i=t.changedTouches[0].clientY,n=t.currentTarget,a=n.scrollTop+this.curMoveClientY-i;a<0&&(a=0),a>this.maxTop&&(a=this.maxTop),n.scrollTop=a,this.curMoveClientY=i,e&&this.aniSlowTop(n)}},{key:"slide",value:function(t,e,i){var n=t.currentTarget,a=n.scrollTop+e*this.maxTop*i/100;a<0&&(a=0),a>this.maxTop&&(a=this.maxTop);var l,s=a-n.scrollTop;l=s>0?30:-30;var r=Math.round(Math.abs(s/l)),o=!1,u=setInterval(function(){r--;var t=n.scrollTop+l;r<=0&&(t=a,o=!0),n.scrollTop=t,o&&(clearInterval(u),this.aniSlowTop(n))}.bind(this),25)}},{key:"aniSlowTop",value:function(t){this.inSlowAni=!0;var e=this.getCurSelInfo();this.slDataMgr.setSel(this.bId,e.name),this.subSelScroll&&this.isAss&&this.subSelScroll.updateList();var i=e.tag*this.itemHei;if(t.scrollTop!=i){var n;a.addClass(t,"block-stop");var l=i-t.scrollTop;n=l>0?1:-1;var s=Math.round(Math.abs(l/n));this.slowAniTimer=setInterval(function(){s--;var e=t.scrollTop+n;s<=0?(t.scrollTop=i,a.removeClass(t,"block-stop"),clearInterval(this.slowAniTimer),this.slowAniTimer=null,this.onAniSlowTopEnd()):t.scrollTop=e}.bind(this),25)}else this.onAniSlowTopEnd()}},{key:"onAniSlowTopEnd",value:function(t){setTimeout(function(){this.inSlowAni=!1}.bind(this),80)}},{key:"updateMaxTop",value:function(){a.removeClass(this.el_cont,"block-stop"),this.el_cont.scrollTop=0,this.maxTop=this.el_list.clientHeight-this.el_cont.clientHeight}},{key:"setCurSel",value:function(t){this.el_cont.scrollTop=t*this.itemHei}},{key:"addList",value:function(){var t=0,e="";e+=this.createItem("",++t),e+=this.createItem("",++t);for(var i in this.listData)e+=this.createItem(i,++t);e+=this.createItem("",++t),e+=this.createItem("",++t),this.el_list.innerHTML=e}},{key:"createItem",value:function(t,e){return'<li id="sarea-item-'+e+'" class="sarea-item sarea-item-'+this.bId+'">'+t+"</li>"}},{key:"updateList",value:function(){this.listData=this.slDataMgr.getListDataById(this.bId),this.addList(),this.el_items=this.el_list.getElementsByClassName("sarea-item"),null==this.itemHei&&(this.itemHei=this.el_cont.clientHeight/5),this.updateMaxTop();var t=this.slDataMgr.getSelValById(this.bId),e=this.slDataMgr.getTagByKey(this.listData,t);this.setCurSel(e),this.subSelScroll&&this.subSelScroll.updateList()}},{key:"getCurSelInfo",value:function(){var t=Math.round(this.el_cont.scrollTop/this.itemHei);return{tag:t,name:this.el_items[t+2].innerHTML}}}]),t}()}]);